{% extends "UserMaster.html" %}


{% block content %}

<section class="content-header">
    <h1>View Invitations</h1>
</section>

<section class="content">
  {% for message in get_flashed_messages() %}
  <div class="box box-solid" style="background-color:#DEF0D8 ; height: 100%;">
    <div class="box-header text-center">
      <h3 class="box-title" style="color: black; font-family:inherit; font-size: medium;"> {{message}}</h3>

      <div class="box-tools pull-right">
        <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times" style="color:black;background-color: transparent;"></i></button>    
      </div>
    </div>
  </div>
  {% endfor %}
    <div class="row">
        <div class="col-xs-12">
          <div class="box" style="margin-top: 1%;">
                <div class="box-body">
                    <table id="tbl" class="table table-bordered table-hover">
                      <thead>
                        <tr>
                          <th>Project Name</th>
                          <th>Team Name</th>
                          <th>Invitation By</th>
                          <th>Action</th>
                        </tr>
                      </thead>
                        <tbody>
                          {% for rows in requestlist %}
                          <tr>
                            <td>{{rows[0]}}</td>
                            <td>{{rows[1]}}</td>
                            <td>{{rows[2]}}</td>
                            <td>
                              <button type="submit" class="btn btn-success" data-toggle="modal" onclick="setTeamDetails('{{rows[1]}}'); setProjID('{{rows[3]}}');" data-target="#modal-confirm">Accept 
                                <i class="fa fa-check"></i>
                              </button>
                              
                              <button type="submit" class="btn btn-danger" data-toggle="modal" onclick="setTeamDetails('{{rows[1]}}'); setProjID('{{rows[3]}}');" data-target="#modal-reject">Reject 
                                <i class="fa fa-remove"></i>
                              </button>
                            </td>
                          </tr>
                          
      <div class="modal fade" id="modal-confirm">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span></button>
              <h4 class="modal-title"><i class="fa fa-exclamation-circle"></i> Confirmation</h4>
            </div>
            <div class="modal-body">
              <p>Are you sure you want to accept invitation from
                <label id= 'teamName1'></label>
              </p>                   
            </div>
            <div class="modal-footer">
              <form action="/ViewRequest" method="POST">
                <input type="hidden" name="purpose" value="accept">
                <input type="hidden" name="ProjectID1" value="">
                <button type="submit" class="btn btn-primary pull-left">Confirm</button>  
              </form>                                           
              <button type="submit" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div> 

      <div class="modal fade" id="modal-reject">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span></button>
              <h4 class="modal-title"><i class="fa fa-exclamation-circle"></i> Confirmation</h4>
            </div>
            <div class="modal-body">
              <p>Are you sure you want to reject
                <label id="teamName2"></label>
                </p>                   
            </div>
            <div class="modal-footer">
              <form action="/ViewRequest" method="POST">
                <input type="hidden" name="purpose" value="dismiss">
                <input type="hidden" name="ProjectID2" value="">
                <button type="submit" class="btn btn-primary pull-left">Confirm</button>  
              </form>                                           
              <button type="submit" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div> 
                          {%endfor%}
                        </tbody>
                    </table>
                </div>
            </div>
            </div>
            </div>
</section>
<script>
  function setTeamDetails(name) {  
    var teamName1 = document.getElementById('teamName1');   
    teamName1.innerHTML = name + "?"; 
    var teamName2 = document.getElementById('teamName2');   
    teamName2.innerHTML = name + "?";
  }

  function setProjID(id){
    var projectID1 = document.getElementById('ProjectID1');
    projectID1.setAttribute('value', id);
    var projectID2 = document.getElementById('ProjectID2');
    projectID2.setAttribute('value', id);
  }

</script>
{% endblock %}